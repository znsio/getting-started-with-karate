@prod @getEmployees
Feature: Implementation for querying Employee APIs

  Scenario: Get list of all employees by calling Java function
    * karate.log( "Get list of all employees by calling Java function")
    Given def employeeId = karate.call('classpath:com/znsio/common/CommonFunctions.feature@generateRandomNumberInRange', {'min': 5, 'max': 50}).generated
    And karate.log("employeeId generated by calling Java class: " + employeeId)
    When karate.log("Get employee details for employeeId: " + employeeId)
    And call read('classpath:com/znsio/templates/employeeTemplates.feature@t_getEmployees') {'empId': #(employeeId) }
    Then karate.log("response from getEmployees: " + response)
    And match response.id == employeeId

  Scenario: Get list of all employees by calling common function
    * karate.log("Get list of all employees by calling common function")
    Given def employeeId = randomNumberInRange(5,20)
    And karate.log("employeeId generated by calling Java class: " + employeeId)
    When karate.log("Get employee details for employeeId: " + employeeId)
    And call read('classpath:com/znsio/templates/employeeTemplates.feature@t_getEmployees') {'empId': #(employeeId) }
    Then karate.log("response from getEmployees: " + response)
    Then match response.id == employeeId